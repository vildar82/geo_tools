Создаем профиль
<p>В геодезии вообще и мне по работе в часности требуется построение приличного количества профилей как по общему числу так и разнообразию таковых. В AutoCAD Civil 3D есть довольно широкий функционал по созданию разлочных профилей и разрезов. Все хорошо и обновляются они автоматом и насторить можно довольно широко. Проблема в том что не достаточно широко и есть моменты которые я им простить никак не могу... Вполне возможно (и наверняка это так и есть) я просто не знаю всего на что способны профиля в Civil, но когда я ввязался в настройку подгонку их под себя и "нашу" геодезию, понял что все это такое крутое и навороченое мне в общем то не очень и нужно, если кто то считает что ему то как раз нужно покруче, пусть погуглит по поводу "Пакет адаптации AutoCAD Civil 3D" и выяснит что уже все-все ГОСТы СНиПы в Civil уже есть и ничего выдумывать не надо и дальше читать не стоит. </p>
<p>Для остальных которым не хочется вникать в премудрости Autodesk хочу обрадовать: Вам придется вникать в мои примудрости :) но их я смею надеятся будет поменьше.</p>
<p>Когда задумывался мой профиль основная философия при разработке была "ткнуть два раза профиль и готов", а потом "ткнуть еще два раза и он оформлен" с тех пор уже много что поменялось, профиль обрастает настройками, но стараюсь чтобы меньше движений отделяло меня от конечного продукта (готового профиля). Может не все гладко но я открыт для предложений.</p>
<p>Ну приступим. Для построения профиля абосолютно необходимо две вещи:</p>
<p>Первое это ось трассы вдоль которой будем строить профиль, эта ось должна быть представлена одной сплошной полилинией (можно 2d или 3d)</p>
<IMG src="draw_profile_01.png" width="457" height="302" alt="Ось трассы">
<p>Второе это отметки которые нужно нанести на профиль отметки могут быть в разных видах: 3d полилиния отметки вершин которой будут спроецированы на ось трассы и нанесены на профиль в виде полилинии, цвет 3d полилинии будет перенесен на полилинию на профиле, поверхность (имеется в виду civil'овская поверхность) и тогда на профиль будет нанесена полилиния с вершинами в местах пересечения оси трассы с треугольниками поверхности, остальные варианты наносят на профиль точечные метки определенной отметки материалом для меток могут служить: COGO точки, тексты с отметкой в содержимом и мультивыноски типа "подпись" также с отметкой в содержимом. Пример содержимого "123.45 верх трубы" - отметка пробел описание </p>
<IMG src="draw_profile_02.png" width="503" height="309" alt="выноски">
<p>Резюмируем для профиля надо полилиния оси трассы и отметки в каком нибудь виде.</p>
<p>Запускаем команду <span class="ncomm">Создать профиль</span>.<IMG src="draw_profile_15.png" width="32" height="32" alt="Создать профиль"></p>

<p>В командной строке видим предложение указать ось трассы</p>
<IMG src="draw_profile_03.png" width="329" height="44" alt="Укажи ось трасы">
<p>Указываем видим окно параметров профиль который будем создавать</p>
<IMG src="draw_profile_04.png" width="330" height="376" alt="Параметры профиля">
<p>По порядку что за чем:</p>
<p><span class="nfield">Название</span> - уникальное (в пределах этого документа) имя профиля, в одном чертеже не может быть двух профилей с одним названием</p>
<p><span class="nfield">Вид профиля</span> - выпадающий список с настроеными видами профилей (подвалами) как правило на каждую комуникацию свой профиль можно настроить свой но об этом чуть ниже</p>
<p><span class="nfield">Числитель вертикального масштаба</span> - целое число отвечающее за вертикальный масштаб профиля.</p>
<p><span class="nfield">Числитель горизонтального масштаба</span> - целое число отвечающее за горизонтальный масштаб профиля.</p>
<p>Далее поле <span class="nfield">Условный горизонт</span></p>
<p>Галочка <span class="nfield">Авто отметка УГ</span> позволяет не думать какой условный горизонт будет у профиля при первом добавлении данных на профиль будет вычислена самая низкая отметка и от нее вычислен условный горизонт </p>
<p>Если по каким то причинам нужно построить профиль с каким то определенным условным горизонтом следует голочку снять и в поле <span class="nfield">Отметка УГ</span> ввести желаемое значение.</p>
<p>Поле <span class="nfield">Чистое место над УГ в м</span> отвечает за высоту от условного горизонта до самой низкой точки. Учавствует при автоматическом определении условного горизонта.</p>
<p>Галочка <span class="nfield">Нанести пересечения</span> позволяет программе просматривать содержимое чертежа на счет пересечения комуникаций с осью трассы. Комуникации распознаются по типу линии и наносятся на профиль. Какому типу линии какая подпись соответствует можно посмотреть и настроить нажав кнопку <span class="nfield">Настроить</span>.</p>
<p>Галочка <span class="nfield">Подписать точки</span> предписывает искать круглые мультивыноски которые указывают на вершины оси трассы и если таковые обнаружены подписать в графу Номера точек, если таковая имеется в профиле.</p>
<p>Галочка <span class="nfield">Наносить углы поворота</span> рисует условные обозначения направления и величины поворота оси трассы</p>
<p>Поле <span class="nfield">Начальный пикет</span> позволяет задать первый пикет профиля. Имеет смысл задавать значение если в используемом профиле есть графа Пикеты. Задавать начальный пикет можно как в метрах например 123.12 так и в пикетах 1+23.12.</p>
<p>Теперь о видах профиля все виды какие есть в выпадающем списке можно редактировать или создавать свои новые. Для этого нужно в выпадающем списке выбрать нижнюю строку <span class="nfield">Редактировать</span></p>
<IMG src="draw_profile_05.png" width="584" height="635" alt="Редактирование вида профиля">
<p>Поле <span class="nfield">Вид профиля</span> отвечает за манипуляции с видами профиля.</p>
<p>В выпадающем списке выбираем вид профиля который будем редактировать.</p>
<p>Кнопка <span class="ncomm">Создать</span> позволяет создать новый вид профиля, имя профиля не может повторяться.</p>
<p>Кнопка <span class="ncomm">Переименовать</span> периименовывает текущий профиль, новое имя не может повторять существующие.</p>
<p>Кнопка <span class="ncomm">Удалить</span> удаляет текущий профиль</p>
<p>Поле <span class="ncomm">Содержимое подвала</span> позволяет отредактировать строки подвала профиля</p>
<p>Поле разделено на три части в левой части отображается содержимое подвала текущего вида профиля, в правой стандартные строки которые можно добавлять в текущий вид профиля и в середине кнопки управления этими списками</p>
<p>Содержимое левого списка соответствует содержимому подвала при создании профиля</p>
<p>В правом списке содержатся все элементы из которого состоит левый. Как набор материалов для создания.</p>
<p>Кнопки по порядку</p>
<p><span class="ncomm">Добавить</span> - добавляет выбранный элемент в правом списке под выделеный элемент в левом списке</p>
<p><span class="ncomm">Вверх/Вниз</span> - позволяет перемещать выбранный элемент в левом списке вверх и вниз по списку</p>
<p><span class="ncomm">Редактировать</span> - открывает окно редактирование параметров элемента в левом списке</p>
<p><span class="ncomm">Удалить</span> - удаляет выбранный элемент в левом списке</p>
<p><span class="ncomm">Редактировать</span> - открывает окно редактирование параметров элемента в правом списке</p>
<p>Поле <span class="nfield">Параметры текущего вида профиля</span> содержит общие параметры вида профиля</p>
<p>Галочка <span class="nfield">Вставить линейку</span> отвечает за вставку линейки отметок на профиль. Если галочка стоит то линейка будет вставлена при первом добавлении высотных данных (точек, линий) на профиль</p>
<p><span class="nfield">Высота текстов заголовков в мм</span> - отвечает за размер текста в заголовках подвала</p>
<p><span class="nfield">Ширина блоков заголовков в подвале в мм</span> - даже добавить нечего</p>
<p><span class="nfield">Расстояние от линейки до начала профиля в мм</span> - зазор между началом профиля и линейкой (правым краем блока заголовков)</p>
<p><span class="nfield">Текстовый стиль профиля</span> - текстовый стиль которым отибражаются все текстовые элементы профиля. Если выбраного текстового стиля нет в текущем чертежа будет использован текущий стиль текста.</p>
<p>Поле <span class="nfield">Строки описания характеристик профиля</span> содержит параметры оформления профиля выше условного горизонта</p>
<p><span class="nfield">Название</span> - в поле можно внести текстовую строку которая будет подписана над блоком зоголовков профиля</p>
<p><span class="nfield">Подпись перед вертикальным масштабом</span> - в поле можно ввести текст к которому при нанесении на профиль добавляется значение вертикального масштаба</p>
<p><span class="nfield">Подпись перед горизонтальным масштабом</span> - в поле можно ввести текст к которому при нанесении на профиль добавляется значение горизонтального масштаба</p>
<p><span class="nfield">Подпись перед условным горизонтом</span> - в поле можно ввести текст к которому при нанесении на профиль добавляется значение отметки условного горизонта</p>
<p><span class="nfield">Высота текста пересечек в мм</span> - при нанесении пересечек на профиль это значение будет использоваться в высоте шрифта текста.</p>
<p><span class="nfield">Чисел после запятьй в выносках</span> - при использовании команды определения отметка на профиле значение будет использована для отображения отметки с определенной точностью.</p>
<p>При нажатии <span class="ncomm">ОК</span> изменения сделаные в этом окне сохраняются во внешнем файле и могут быть использованы в других чертежах. По этой же причине отменить изменеия не получится средствами AutoCAD. Для возвращения к значениям по умолчанию следует использовать команду <span class="ncomm">Сброс пользовательских данных</span>.</p>
<p>После всех требуемых настроек давим <span class="ncomm">ОК</span> и получаем указание в командной строке на выбор точки вставки профиля</p>
<IMG src="draw_profile_06.png" width="321" height="61" alt="Укажи точку вставки профиля">
<p>Указаная точка будет располагаться в верхнем правом углу блока заголовков, как раз там от куда возможно будет расти линейка</p>
<IMG src="draw_profile_07.png" width="508" height="482" alt="Подвал профиля">
<p>Получаем заготовку подвала профиля. Длинна горизонтальных линий соответствует длинне трассы плюс отступ от линейки. Теперь надо наполнить профиль высотами. Для этих целей можно использовать команду <span class="ncomm">Добавить линию на профиль</span> <IMG class="icon" src="draw_profile_16.png" width="32" height="32" alt="Добавить линию на профиль"></p>
<p>получаем запрос на выбор полилинии или поверхности</p>
<IMG src="draw_profile_09.png" width="363" height="60" alt="Выбери полилинию или поверхность">
<p>полилиния может располагаться поверх оси трассы или идти поралельно, в последнем случае отметки с вершин будут снесены на ближайший элемент (линия вершина)оси трассы </p>
<IMG src="draw_profile_08.png" width="379" height="252" alt="Трехмерная линия на оси трассы">
<p>после выбора смотрим на профиль и видим что добавилась линия тем же цветом что и выбранная (но в текущем слое), вычислился условный горизонт и появилась линейка с подписью средней отметки</p>
<IMG src="draw_profile_10.png" width="600" height="496" alt="Полилиния на профиле">
<p>Как вариант можно использовать команду <span class="ncomm">Добавить точку на профиль</span> <IMG class="icon" src="draw_profile_17.png" width="32" height="32" alt="Добавить точку на профиль"></p>
<p>Все аналогично только выбираются тексты, COGO точки или мультивыноски. результат будет выглядеть примерно так</p>
<IMG src="draw_profile_11.png" width="649" height="501" alt="Мультивыноски на профиле">
<p>С помощью этих двух команд переносим отметки с плана на профиль. Вообще для работы в пространстве профиля есть еще команды типа Измерить превышение, Отложить превышение, Нанести пересечку на профиль и другие. Более подробно о них напишу как нибудь попозже, наверно.</p>
<p>Будем считать профиль мы построили. Теперь надо, на его основе, заполнить подвал. Для этого основной инструмент команды <span class="ncomm">Вычислить линию на профиле</span>.
<IMG class="icon" src="draw_profile_18.png" width="32" height="32" alt="Вычислить линию на профиле"></p>
<p>Команда работает в два клика: указываем полилинию на профиле, указываем заполняемую строку подвале(точку между линиями строки). На картинке пример заполнения строки с отметками.</p>
<IMG src="draw_profile_12.png" width="474" height="437" alt="Заполнение подвала по полилинии">
<p>Таким же образом заполняются строки с рассояниями и уклонами. Программа сама определяет чем заполнить выбраную строку (тип строки настраивается в виде профиля) и только при выборе строки с <span class="nfield">Глубиной заложения</span> программа запросит еще одну полилинию профиля чтобы вычислить разницу между ними.</p>
<p>Когда потребуется нарисовать вертикальные линии на профиле выбирать следует не строку подвала, а ткнуть в любом месте выше условного горизонта.</p>
<IMG src="draw_profile_13.png" width="479" height="440" alt="Опускаем линии до условного горизонта">
<p>При попытке заполнить строку для которой это невозможно будет выведено сообщение с ошибкой.</p>
<IMG src="draw_profile_14.png" width="450" height="107" alt="Ошибка">
<p>Существует также кнопка <span class="ncomm">Нанести измерение на профиле</span> работающая по тому же принципу но только с одним измерением длинна, уклон, превышение...</p>
<p>Кнопка <span class="ncomm">Определить отметку</span> на профиле работает только с отметками и только по одной</p>
<div class="data"><p>2012.05.05</p></div>
<p><br></p>
<p><span class="ncomm">updata</span></p>
<p>Примечание о масштабах.<br></p>
<p>Профиль чертится таким образом чтобы длина всегда соответствовала 1:1 с планом. Для облегчения чего нибудь пририсовать вручную. Построения и измерения связаные с высотой на профиле выполняются специально сделаными командами: "Измерить превышение, расстояние и уклон", "Отложить превышение или уклон с расстоянием" и др. При печати задается горизонтальный масштаб профиля.</p>
<div class="data"><p>2013.01.09</p></div>